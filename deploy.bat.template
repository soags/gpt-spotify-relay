@echo off
setlocal

:: Copy this file to deploy.bat and fill in actual values
set SPOTIFY_CLIENT_ID=your_client_id
set SPOTIFY_CLIENT_SECRET=your_client_secret
set SPOTIFY_REFRESH_TOKEN=your_refresh_token
set X_API_KEY=your_api_key

gcloud functions deploy spotifyRelay ^
--gen2 ^
--region=asia-northeast1 ^
--runtime=nodejs22 ^
--source=. ^
--entry-point=spotifyRelay ^
--trigger-http ^
--set-env-vars=SPOTIFY_CLIENT_ID=%SPOTIFY_CLIENT_ID%,SPOTIFY_CLIENT_SECRET=%SPOTIFY_CLIENT_SECRET%,SPOTIFY_REFRESH_TOKEN=%SPOTIFY_REFRESH_TOKEN%,X_API_KEY=%X_API_KEY% ^
--allow-unauthenticated

endlocal
